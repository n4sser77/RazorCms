@page
@model RazorCms.Pages.Admin.IndexModel
@inject RazorCms.Data.ApplicationDbContext DbContext

@{
    ViewData["Title"] = "Admin";
    var pages = DbContext.Pages.OrderBy(p => p.OrderIndex).ToList();
}

<h1>Control Panel</h1>

<ul>
    @foreach (var page in pages)
    {
        <li>
            <a asp-page="/Admin/EditPage" asp-route-id="@(page.Id)">@(page.Title)</a>
            <a asp-page="/Admin/DeletePage" asp-route-id="@(page.Id)">Delete</a>
            <a asp-page="/CmsPage" asp-route-id="@(page.Id)">View</a>
        </li>
    }
</ul>

<a asp-page="/Admin/CreatePage">Create New Page</a>
